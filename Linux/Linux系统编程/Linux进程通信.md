# Linux进程通信

## IPC方法

Linux环境下，进程地址空间相互独立，每个进程各自有不同的用户地址空间。任何一个进程的全局变量在另一个进程中都看不到，所以进程和进程之间不能相互访问，要交换数据必须通过内核，在内核中开辟一块缓冲区，进程1把数据从用户空间拷到内核缓冲区，进程2再从内核缓冲区把数据读走，内核提供的这种机制称为进程间通信（IPC，InterProcess Communication）。

在进程间完成数据传递需要借助操作系统提供特殊的方法，如：文件、管道、信号、共享内存、消息队列、套接字、命名管道等。随着计算机的蓬勃发展，一些方法由于自身设计缺陷被淘汰或者弃用。

现今常用的进程间通信方式有：

> 1. 管道 (使用最简单 )
> 2. 信号 (开销最小)
> 3. 共享映射区 (无血缘关系)
> 4. 本地套接字 (最稳定)



## 管道

### 管道的概念

管道是一种简单的IPC机制，作用于有**血缘关系**的进程之间，完成数据的传递。调用Pipe系统函数即可创建一个管道。

有如下特质：

> 1. 本质是一个伪文件(实质是内存缓冲区)。
> 2. 由两个文件描述符引用，一个表示读端，一个表示写端。
> 3. 规定数据从管道的写端流入管道，从读端流出。



管道的原理:  管道实为内核使用环形队列机制，借助内核缓冲区(4k)实现。

管道的局限性：

> 1.  数据自己读不能自己写
> 2.  数据一旦被读走，便不在管道中存在，不可反复读取。
> 3.  由于管道采用半双工通信方式。因此，数据只能在一个方向上流动。
> 4. 只能在有公共祖先的进程间使用管道。



常见的通信方式有，单工通信、半双工通信、全双工通信。